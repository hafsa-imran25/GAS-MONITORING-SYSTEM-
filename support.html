<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Support — SmartGas</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(100deg,#82bae5 20%, #f7fbff 100%);
    }
    .navbar {
      background: linear-gradient(90deg, rgba(30,144,255,0.95), rgba(24,123,219,0.95));
      box-shadow: 0 8px 30px rgba(2,6,23,0.08);
    }
    .navbar .navbar-brand { font-weight:700; color:#fff; }
    .navbar .nav-link { color: rgba(255,255,255,0.95); }
    .navbar .nav-link:hover { color: #fff; text-decoration: underline; }

    .btn-login {
      border: #fff solid 1px;
      color: white !important;
      border-radius: 10px;
      padding: 6px 16px;
      transition: 0.3s;
    }
    .btn-login:hover { background:#fff; color: dodgerblue !important; }

    .contact-section {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
      justify-content: center;
      margin-top: 60px;
    }
    .contact-card {
      background: white;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.08);
      padding: 30px;
      flex: 1 1 340px;
      transition: 0.4s;
    }
    .contact-card:hover { transform: translateY(-5px); }
    .contact-card h4 {
      color: dodgerblue;
      margin-bottom: 20px;
      font-weight: 600;
    }
    .info-item { margin-bottom: 15px; }
    .info-item i {
      color: dodgerblue;
      font-size: 20px;
      margin-right: 10px;
    }
    .btn-primary {
      background-color: dodgerblue;
      border: none;
      font-weight: 500;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: 0.3s;
    }
    .btn-primary:hover { background-color: #0073e6; }
    .footer {
      background: #a0c0e2;
      padding: 15px;
      text-align: center;
      font-size: 14px;
      margin-top: 85px;
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg">
    <div class="container">
      <a class="navbar-brand" href="index.html"><i class="fa-solid fa-microchip"></i> <b>SmartGas System</b></a>
      <div class="collapse navbar-collapse" id="navMenu">
        <ul class="navbar-nav ms-auto align-items-center">
          <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="how-it-works.html">How it Works</a></li>
          <li class="nav-item ms-2"><a class="btn btn-login" href="login.html">Login</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Contact Section -->
  <main class="container contact-section">
    <!-- Contact Info -->
    <div class="contact-card text-center">
      <h4><i class="fa-solid fa-headset"></i> <strong>Contact Details</strong></h4>
      <p class="text-muted mt-3">You can reach us using the information below</p>
      <div class="info-item">
        <em>Email Support</em><br>
        <i class="fa-solid fa-envelope"></i> <b>pluspointtechnologies09@gmail.com</b></div>
      <div class="info-item">
          <em>Helpline Number</em><br>
        <i class="fa-solid fa-phone"></i> <b>+91 8247740234</b></div>
      <div class="info-item">
        <em>Office Location</em><br>
        <i class="fa-solid fa-location-dot"></i> <b>Hyderabad, Telangana, India</b></div>
      <p class="text-muted mt-3">We respond to all queries within 1 business day.</p>
    </div>

    <!-- Support Form -->
    <div class="contact-card">
      <h4><i class="fa-solid fa-message"></i> <strong>Send Us a Message</strong></h4>
      <form id="supportForm">
        <div class="mb-3">
          <label class="form-label"><b>Your Full Name</b></label>
          <input id="sname" class="form-control" placeholder="Name" required>
        </div>
        <div class="mb-3">
          <label class="form-label"><b>Your Email</b></label>
          <input id="semail" type="email" class="form-control" placeholder="john@example.com" required>
        </div>
        <div class="mb-3">
          <label class="form-label"><b>Your Query / Message</b></label>
          <textarea id="smessage" class="form-control" rows="4" placeholder="Tell us how we can help..." required></textarea>
        </div>
        <button type="submit" class="btn btn-primary w-100">
          <i class="fa-solid fa-paper-plane"></i> Submit Message
        </button>
      </form>
    </div>
  </main>

  <footer class="footer">
    <small>© 2025 SmartGas System</small>
  </footer>

  <!-- Firebase + EmailJS -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
    import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore.js";

    // ✅ Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyC-YKhMYK3GdknDo4rjD0ksmdlWNX6ESo8",
      authDomain: "gas-management-system-f4344.firebaseapp.com",
      projectId: "gas-management-system-f4344",
      storageBucket: "gas-management-system-f4344.firebasestorage.app",
      messagingSenderId: "511571836469",
      appId: "1:511571836469:web:91aca14dc4c99d4c51fb7c",
      measurementId: "G-CHTZ3F8BXR"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // ✅ Initialize EmailJS
    emailjs.init("pfdkXes73pzy-218r");

    // ✅ Handle Form Submission
    document.getElementById('supportForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      const sname = document.getElementById('sname').value.trim();
      const semail = document.getElementById('semail').value.trim();
      const smessage = document.getElementById('smessage').value.trim();

      if (!sname || !semail || !smessage) return;

      try {
        // Save to Firestore
        await addDoc(collection(db, "support_messages"), {
          name: sname,
          email: semail,
          message: smessage,
          timestamp: serverTimestamp()
        });

        // Send to company (contact us template)
        await emailjs.send("service_siiroea", "template_3cga35b", {
          from_name: sname,
          from_email: semail,
          message: smessage,
          time: new Date().toLocaleString(),
        });

        // Auto reply to user
        await emailjs.send("service_siiroea", "template_sutnfqi", {
          to_name: sname,
          to_email: semail,
        });

        // Show success popup
        Swal.fire({
          icon: 'success',
          title: 'Message Sent!',
          html: '<b>Your message has been sent successfully.</b><br>Our team will reply within 1 business day.',
          background: 'dodgerblue',
          color: '#fff',
          showConfirmButton: false,
          timer: 3500,
          timerProgressBar: true,
          backdrop: 'rgba(0,0,0,0.6)',
        });

        e.target.reset();

      } catch (error) {
        console.error("Error:", error);
        Swal.fire({
          icon: 'error',
          title: 'Something went wrong!',
          text: 'Unable to send message. Please try again later.',
          background: 'dodgerblue',
          color: '#fff',
          showConfirmButton: false,
          timer: 3000,
          backdrop: 'rgba(0,0,0,0.6)',
        });
      }
    });
  </script>
</body>
</html>
